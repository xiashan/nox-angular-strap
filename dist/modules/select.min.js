/**
 * angular-strap
 * @version v2.3.10 - 2018-04-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.select',['mgcrea.ngStrap.tooltip','mgcrea.ngStrap.helpers.parseOptions']).provider('$select',function(){var e=this.defaults={animation:'am-fade',prefixClass:'select',prefixEvent:'$select',placement:'bottom-left',templateUrl:'select/select.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,autoClose:!1,search:!1,sort:!0,caretHtml:'&nbsp;<span class="select-arrow"><i class="nox-sort-down"></i></span>',placeholder:'Choose among the following...',allText:'All',noneText:'None',maxLength:3,maxLengthHtml:'selected',iconCheckmark:'glyphicon glyphicon-ok',toggle:!1};this.$get=['$window','$document','$rootScope','$tooltip','$timeout',function(t,n,a,l,o){function i(a,i,r){var s={},u=angular.extend({},e,r);s=l(a,u);var d=s.$scope;d.$matches=[],u.multiple?d.$activeIndex=[]:d.$activeIndex=-1,d.$isMultiple=u.multiple,d.$showAllNoneButtons=u.allNoneButtons&&u.multiple,d.$showSearch=u.search,d.$iconCheckmark=u.iconCheckmark,d.$allText=u.allText,d.$noneText=u.noneText,d.$searchText='',d.$changeSearchText=function(e){e.preventDefault(),e.stopPropagation()},d.$close=function(){d.$$postDigest(function(){s.hide(!0)})},d.$searchTextChange=function(e){d.searchText=e.searchText},d.$activate=function(e){d.$$postDigest(function(){s.activate(e)})},d.$select=function(e,t){d.$$postDigest(function(){s.select(e,t)})},d.$isVisible=function(){return s.$isVisible()},d.$isActive=function(e){return s.$isActive(e)},d.$selectAll=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)||d.$select(e)},d.$selectNone=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)&&d.$select(e)},s.update=function(e){d.$matches=e,s.$updateActiveIndex()},s.activate=function(e){return u.multiple?(s.$isActive(e)?d.$activeIndex.splice(d.$activeIndex.indexOf(e),1):d.$activeIndex.push(e),u.sort&&d.$activeIndex.sort(function(e,t){return e-t})):d.$activeIndex=e,d.$activeIndex},s.select=function(e,t){if(!(angular.isUndefined(e)||0>e||e>=d.$matches.length)){var n=d.$matches[e].value;d.$apply(function(){s.activate(e),u.multiple?i.$setViewValue(d.$activeIndex.map(function(e){return angular.isUndefined(d.$matches[e])?null:d.$matches[e].value})):(u.toggle?i.$setViewValue(n===i.$modelValue?void 0:n):i.$setViewValue(n),s.hide())}),d.$emit(u.prefixEvent+'.select',n,e,s),angular.isDefined(u.onSelect)&&angular.isFunction(u.onSelect)&&u.onSelect(n,e,s)}},s.$updateActiveIndex=function(){u.multiple?angular.isArray(i.$modelValue)?d.$activeIndex=i.$modelValue.map(function(e){return s.$getIndex(e)}):d.$activeIndex=[]:angular.isDefined(i.$modelValue)&&d.$matches.length?d.$activeIndex=s.$getIndex(i.$modelValue):d.$activeIndex=-1},s.$isVisible=function(){return u.minLength&&i?d.$matches.length&&i.$viewValue.length>=u.minLength:d.$matches.length},s.$isActive=function(e){return u.multiple?-1!==d.$activeIndex.indexOf(e):d.$activeIndex===e},s.$getIndex=function(e){var t;for(t=d.$matches.length;t--&&!angular.equals(d.$matches[t].value,e););return t},s.$onMouseDown=function(e){if(e.preventDefault(!0),e.stopPropagation(!0),'search'===e.target.getAttribute('role')&&(e.target.focus(),d.searchText=''),c){var t,n=angular.element(e.target);if('A'!==e.target.nodeName)for(var a=n.parent();!t&&a.length>0;)'A'===a[0].nodeName&&(t=a),a=a.parent();t?angular.element(t).triggerHandler('click'):n.triggerHandler('click')}},s.$onKeyDown=function(e){return/(9|13|38|40)/.test(e.keyCode)?(9!==e.keyCode&&(e.preventDefault(),e.stopPropagation()),u.multiple&&9===e.keyCode?s.hide():u.multiple||13!==e.keyCode&&9!==e.keyCode?void(u.multiple||(38===e.keyCode&&d.$activeIndex>0?d.$activeIndex--:38===e.keyCode&&d.$activeIndex<0?d.$activeIndex=d.$matches.length-1:40===e.keyCode&&d.$activeIndex<d.$matches.length-1?d.$activeIndex++:angular.isUndefined(d.$activeIndex)&&(d.$activeIndex=0),d.$digest())):s.select(d.$activeIndex)):void 0},s.$isIE=function(){var e=t.navigator.userAgent;return e.indexOf('MSIE ')>0||e.indexOf('Trident/')>0||e.indexOf('Edge/')>0},s.$selectScrollFix=function(e){'UL'===n[0].activeElement.tagName&&(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus())};var $=s.show;s.show=function(){$(),u.multiple&&s.$element.addClass('select-multiple'),o(function(){s.$element.on(c?'touchstart':'mousedown',s.$onMouseDown),u.keyboard&&a.on('keydown',s.$onKeyDown)},0,!1)};var m=s.hide;return s.hide=function(){!u.multiple&&angular.isUndefined(i.$modelValue)&&(d.$activeIndex=-1),u.search&&(d.searchText=''),s.$element.off(c?'touchstart':'mousedown',s.$onMouseDown),u.keyboard&&a.off('keydown',s.$onKeyDown),m(!0)},s}var r=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),c='createTouch'in t.document&&r;return i.defaults=e,i}]}).directive('bsSelect',['$window','$parse','$q','$select','$parseOptions',function(e,t,n,a,l){var o=a.defaults;return{restrict:'EAC',require:'ngModel',link:function(e,t,n,i){var r={scope:e,placeholder:o.placeholder};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','keyboard','html','animation','placeholder','allNoneButtons','maxLength','maxLengthHtml','allText','noneText','iconCheckmark','autoClose','id','sort','search','caretHtml','prefixClass','prefixEvent','toggle'],function(e){angular.isDefined(n[e])&&(r[e]=n[e])});var c=/^(false|0|)$/i;angular.forEach(['html','container','allNoneButtons','sort','search'],function(e){angular.isDefined(n[e])&&c.test(n[e])&&(r[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide','onSelect'],function(t){var a='bs'+t.charAt(0).toUpperCase()+t.slice(1);angular.isDefined(n[a])&&(r[t]=e.$eval(n[a]))});var s=t.attr('data-multiple');angular.isDefined(s)&&(c.test(s)?r.multiple=!1:r.multiple=s);var u=t.attr('data-search');if(angular.isDefined(u)&&(c.test(u)?r.search=!1:(r.search=u,e.searchText='')),'select'===t[0].nodeName.toLowerCase()){var d=t;d.css('display','none'),t=angular.element('<button type="button" class="btn btn-default"></button>'),d.after(t)}var $=l(n.bsOptions),m=a(t,i,r);m.$isIE()&&t[0].addEventListener('blur',m.$selectScrollFix);var h=$.$match[7].replace(/\|.+/,'').trim();e.$watch(h,function(t,n){$.valuesFn(e,i).then(function(e){m.update(e),i.$render()})},!0),e.$watch(n.ngModel,function(e,t){console.warn('scope.$watch(%s)',n.ngModel,e,t),m.$updateActiveIndex(),i.$render()},!0),i.$render=function(){console.warn('$render',t.attr('ng-model'),'controller.$modelValue',typeof i.$modelValue,i.$modelValue,'controller.$viewValue',typeof i.$viewValue,i.$viewValue);var e,n;r.multiple&&angular.isArray(i.$modelValue)?(e=i.$modelValue.map(function(e){return n=m.$getIndex(e),-1!==n?m.$scope.$matches[n].label:!1}).filter(angular.isDefined),e=e.length>(r.maxLength||o.maxLength)?e.length+' '+(r.maxLengthHtml||o.maxLengthHtml):e.join(', ')):(n=m.$getIndex(i.$modelValue),e=-1!==n?m.$scope.$matches[n].label:!1),t.html((e||r.placeholder)+(r.caretHtml||o.caretHtml))},r.multiple&&(i.$isEmpty=function(e){return!e||0===e.length}),e.$on('$destroy',function(){m&&m.destroy(),r=null,m=null})}}}]).filter('searchFilter',function(){return function(e,t,n){var a=[];return angular.forEach(e,function(e){e[t].indexOf(n)>-1&&a.push(e)}),a}});
//# sourceMappingURL=select.min.js.map
