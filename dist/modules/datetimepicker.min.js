/**
 * angular-strap
 * @version v2.3.10 - 2018-04-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.datetimepicker',['mgcrea.ngStrap.helpers.dateParser','mgcrea.ngStrap.helpers.dateFormatter','mgcrea.ngStrap.tooltip']).provider('datetimepickerViews',function(){function e(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a}function t(e,t){return(e%t+t)%t}this.$get=['$dateFormatter','$dateParser','$sce',function(a,n,i){function o(o){var r=o.$scope,s=o.$options,d=s.lang,l=function(e,t){return a.formatDate(e,t,d)},u=a.getDatetimeFormat(s.dateFormat,d),c=a.timeSeparator(u),m=a.showSeconds(u);r.$iconUp=s.iconUp,r.$iconDown=s.iconDown;var g=n({format:s.dateFormat,lang:d,strict:s.strictFormat}),h=a.weekdaysShort(d),$=h.slice(s.startWeek).concat(h.slice(0,s.startWeek)),f=i.trustAsHtml('<th class="dow text-center">'+$.join('</th><th class="dow text-center">')+'</th>'),D=o.$date||(s.startDate?g.getDateForAttribute('startDate',s.startDate):new Date),p={year:D.getFullYear(),month:D.getMonth(),date:D.getDate(),hour:D.getHours(),minute:D.getMinutes(),second:D.getSeconds(),millisecond:D.getMilliseconds()},y=[{hourFormat:s.hourFormat,minuteFormat:s.minuteFormat,secondFormat:s.secondFormat,split:7,steps:{date:1},update:function(e,t){angular.isDate(e)&&!isNaN(e.getTime())?(angular.extend(p,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate(),hour:o.$date.getHours(),minute:o.$date.getMinutes(),second:o.$date.getSeconds(),millisecond:o.$date.getMilliseconds()}),o.$build()):(!this.built||t)&&o.$build()},build:function(){var e,t,a,n=r.midIndex=parseInt(s.length/2,10),i=[];for(e=0;e<s.length;e++)a=p.hour-(n-e)*s.hourStep,a=0>a?24+a:a,t=new Date(p.year,p.month,p.date,a,p.minute,p.second),i.push({date:t,label:l(t,this.hourFormat),selected:o.$date&&this.isSelected(t,0),disabled:this.isDisabled(t,0)});var d,u=[];for(e=0;e<s.length;e++)a=p.minute-(n-e)*s.minuteStep,a=0>a?60+a:a,d=new Date(p.year,p.month,p.date,p.hour,a,p.second),u.push({date:d,label:l(d,this.minuteFormat),selected:o.$date&&this.isSelected(d,1),disabled:this.isDisabled(d,1)});var g,h=[];for(e=0;e<s.length;e++)a=p.second-(n-e)*s.secondStep,a=0>a?60+a:a,g=new Date(p.year,p.month,p.date,p.hour,p.minute,a),h.push({date:g,label:l(g,this.secondFormat),selected:o.$date&&this.isSelected(g,2),disabled:this.isDisabled(g,2)});var $=[];for(e=0;e<s.length;e++)m?$.push([i[e],u[e],h[e]]):$.push([i[e],u[e]]);r.title=l(new Date(p.year,p.month,p.date),s.timeTitleFormat),r.rows=$,r.showSeconds=m,r.timeSeparator=c,this.built=!0},isSelected:function(e,t){return o.$date?0===t?e.getHours()===o.$date.getHours():1===t?e.getMinutes()===o.$date.getMinutes():2===t?e.getSeconds()===o.$date.getSeconds():!1:!1},isDisabled:function(e,t){var a=e.getTime();return s.minDate&&angular.isDate(s.minDate)&&a<s.minDate.getTime()||s.maxDate&&angular.isDate(s.maxDate)&&a>s.maxDate.getTime()},onKeyDown:function(e){!o.$date}},{format:s.dayFormat,split:7,steps:{month:1},update:function(e,t){!this.built||t||e.getFullYear()!==p.year||e.getMonth()!==p.month?(angular.extend(p,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):(e.getDate()!==p.date||1===e.getDate())&&(p.date=o.$date.getDate(),o.$updateSelected())},build:function(){var a=new Date(p.year,p.month,1),n=a.getTimezoneOffset(),i=new Date(+a-864e5*t(a.getDay()-s.startWeek,7)),d=i.getTimezoneOffset(),u=g.timezoneOffsetAdjust(new Date,s.timezone).toDateString();d!==n&&(i=new Date(+i+6e4*(d-n)));for(var c,m=[],h=0;42>h;h++)c=g.daylightSavingAdjust(new Date(i.getFullYear(),i.getMonth(),i.getDate()+h)),m.push({date:c,isToday:c.toDateString()===u,label:l(c,this.format),selected:o.$date&&this.isSelected(c),muted:c.getMonth()!==p.month,disabled:this.isDisabled(c)});r.title=l(a,s.monthTitleFormat),r.showLabels=!0,r.labels=f,r.rows=e(m,this.split),r.isTodayDisabled=this.isDisabled(new Date),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()&&e.getMonth()===o.$date.getMonth()&&e.getDate()===o.$date.getDate()},isDisabled:function(e){var t=e.getTime();if(s.minDate&&angular.isDate(s.minDate)){var a=new Date(s.minDate.getFullYear(),s.minDate.getMonth(),s.minDate.getDate(),0,0,0);if(t<Date.parse(a))return!0}if(s.maxDate&&angular.isDate(s.maxDate)){var n=new Date(s.maxDate.getFullYear(),s.maxDate.getMonth(),s.maxDate.getDate()+1,0,0,0);if(t>=Date.parse(n))return!0}if(-1!==s.daysOfWeekDisabled.indexOf(e.getDay()))return!0;if(s.disabledDateRanges)for(var i=0;i<s.disabledDateRanges.length;i++)if(t>=s.disabledDateRanges[i].start&&t<=s.disabledDateRanges[i].end)return!0;return!1},onKeyDown:function(e){if(o.$date){var t,a=o.$date.getTime();37===e.keyCode?t=new Date(a-864e5):38===e.keyCode?t=new Date(a-6048e5):39===e.keyCode?t=new Date(a+864e5):40===e.keyCode&&(t=new Date(a+6048e5)),this.isDisabled(t)||o.select(t,!0)}}},{name:'month',format:s.monthFormat,split:4,steps:{year:1},update:function(e,t){this.built&&e.getFullYear()===p.year?e.getMonth()!==p.month&&(angular.extend(p,{month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected()):(angular.extend(p,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build())},build:function(){for(var t,a=[],n=0;12>n;n++)t=new Date(p.year,n,1),a.push({date:t,label:l(t,this.format),selected:o.$isSelected(t),disabled:this.isDisabled(t)});r.title=l(t,s.yearTitleFormat),r.showLabels=!1,r.rows=e(a,this.split),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()&&e.getMonth()===o.$date.getMonth()},isDisabled:function(e){var t=+new Date(e.getFullYear(),e.getMonth()+1,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){if(o.$date){var t=o.$date.getMonth(),a=new Date(o.$date);37===e.keyCode?a.setMonth(t-1):38===e.keyCode?a.setMonth(t-4):39===e.keyCode?a.setMonth(t+1):40===e.keyCode&&a.setMonth(t+4),this.isDisabled(a)||o.select(a,!0)}}},{name:'year',format:s.yearFormat,split:4,steps:{year:12},update:function(e,t){!this.built||t||parseInt(e.getFullYear()/20,10)!==parseInt(p.year/20,10)?(angular.extend(p,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):e.getFullYear()!==p.year&&(angular.extend(p,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected())},build:function(){for(var t,a=p.year-p.year%(3*this.split),n=[],i=0;12>i;i++)t=new Date(a+i,0,1),n.push({date:t,label:l(t,this.format),selected:o.$isSelected(t),disabled:this.isDisabled(t)});r.title=n[0].label+'-'+n[n.length-1].label,r.showLabels=!1,r.rows=e(n,this.split),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()},isDisabled:function(e){var t=+new Date(e.getFullYear()+1,0,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){if(o.$date){var t=o.$date.getFullYear(),a=new Date(o.$date);37===e.keyCode?a.setYear(t-1):38===e.keyCode?a.setYear(t-4):39===e.keyCode?a.setYear(t+1):40===e.keyCode&&a.setYear(t+4),this.isDisabled(a)||o.select(a,!0)}}}];return{views:s.minView?Array.prototype.slice.call(y,s.minView):y,viewDate:p}}return o}]}).provider('$datetimepicker',function(){var e=this.defaults={animation:'am-fade',prefixClass:'datepicker',placement:'bottom-left',templateUrl:'datetimepicker/datetimepicker.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:'date',dateFormat:'shortDate',timezone:null,modelDateFormat:null,hourFormat:'HH',minuteFormat:'mm',secondFormat:'ss',dayFormat:'dd',monthFormat:'MMM',yearFormat:'yyyy',monthTitleFormat:'MMMM yyyy',timeTitleFormat:'dd MMM',yearTitleFormat:'yyyy',strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:1,minView:0,startWeek:0,daysOfWeekDisabled:'',hasToday:!1,hasClear:!1,length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:'nox-sort-up',iconDown:'nox-sort-down',iconLeft:'nox-sort-left',iconRight:'nox-sort-right',arrowBehavior:'pager'};this.$get=['$window','$document','$rootScope','$sce','$dateFormatter','datetimepickerViews','$tooltip','$timeout',function(t,a,n,i,o,r,s,d){function l(t,a,n){function i(e){e.selected=l.$isSelected(e.date)}function o(){t[0].focus()}var l=s(t,angular.extend({},e,n)),m=n.scope,g=l.$options,h=l.$scope;g.startView&&(g.startView-=g.minView);var $=r(l);l.$views=$.views;var f=$.viewDate;h.$mode=g.startView,h.$iconLeft=g.iconLeft,h.$iconRight=g.iconRight,h.$hasToday=g.hasToday,h.$hasClear=g.hasClear;var D=l.$views[h.$mode];h.$select=function(e){l.select(e)},h.$selectPane=function(e){l.$selectPane(e)},h.$selectTime=function(e,t){l.selectTime(e,t)},h.$arrowAction=function(e,t){'picker'===g.arrowBehavior?l.$setTimeByStep(e,t):l.$moveIndex(e,t)},h.$toggleMode=function(){l.setMode((h.$mode+1)%l.$views.length)},h.$setToday=function(){g.autoclose?(l.setMode(0),l.select(new Date)):l.select(new Date,!0)},h.$clear=function(){g.autoclose?(l.setMode(0),l.select(null)):l.select(null,!0)},l.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())&&(l.$date=e,D.update.call(D,e)),l.$build(!0)},l.updateDisabledDates=function(e){g.disabledDateRanges=e;for(var t=0,a=h.rows.length;a>t;t++)angular.forEach(h.rows[t],l.$setDisabledEl)},l.select=function(e,t){angular.isDate(e)?(!angular.isDate(a.$dateValue)||isNaN(a.$dateValue.getTime()))&&(a.$dateValue=new Date(e)):a.$dateValue=null,!h.$mode||t?(a.$setViewValue(angular.copy(e)),a.$render(),g.autoclose&&!t&&d(function(){l.hide(!0)})):(angular.extend(f,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}),l.setMode(h.$mode-1),l.$build())},l.selectTime=function(e,t,n){(!a.$dateValue||isNaN(a.$dateValue.getTime()))&&(a.$dateValue=new Date),angular.isDate(e)||(e=new Date(e)),a.$dateValue.setFullYear(e.getFullYear()),a.$dateValue.setMonth(e.getMonth()),a.$dateValue.setDate(e.getDate()),0===t?a.$dateValue.setHours(e.getHours()):1===t?a.$dateValue.setMinutes(e.getMinutes()):2===t&&a.$dateValue.setSeconds(e.getSeconds()),a.$setViewValue(angular.copy(a.$dateValue)),a.$render(),g.autoclose&&!n&&d(function(){l.hide(!0)})},l.setMode=function(e){h.$mode=e,D=l.$views[h.$mode],l.$build()},l.$build=function(e){e===!0&&D.built||(e!==!1||D.built)&&D.build.call(D)},l.$updateSelected=function(){for(var e=0,t=h.rows.length;t>e;e++)angular.forEach(h.rows[e],i)},l.$isSelected=function(e){return D.isSelected(e)},l.$setDisabledEl=function(e){e.disabled=D.isDisabled(e.date)},l.$selectPane=function(e){var t=D.steps,a=new Date(Date.UTC(f.year+(t.year||0)*e,f.month+(t.month||0)*e,t.date?f.date+t.date*e:1));angular.extend(f,{year:a.getUTCFullYear(),month:a.getUTCMonth(),date:a.getUTCDate()}),l.$build()},l.$setTimeByStep=function(e,t){var a=new Date(l.$date),n=a.getHours(),i=a.getMinutes(),o=a.getSeconds();0===t?a.setHours(n-parseInt(g.hourStep,10)*e):1===t?a.setMinutes(i-parseInt(g.minuteStep,10)*e):2===t&&a.setSeconds(o-parseInt(g.secondStep,10)*e),l.selectTime(a,t,!0)},l.$moveIndex=function(e,t){var a;0===t?(a=new Date(f.year,f.month,f.date,f.hour+e*g.length,f.minute,f.second),angular.extend(f,{hour:a.getHours()})):1===t?(a=new Date(f.year,f.month,f.date,f.hour,f.minute+e*g.length*g.minuteStep,f.second),angular.extend(f,{minute:a.getMinutes()})):2===t&&(a=new Date(f.year,f.month,f.date,f.hour,f.minute,f.second+e*g.length*g.secondStep),angular.extend(f,{second:a.getSeconds()})),l.$build()},l.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),c){var t=angular.element(e.target);'button'!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler('click')}},l.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void(h.$mode?h.$apply(function(){l.setMode(h.$mode-1)}):l.hide(!0));D.onKeyDown(e),m.$digest()}};var p=l.init;l.init=function(){return u&&g.useNative?(t.prop('type','date'),void t.css('-webkit-appearance','textfield')):(c&&(t.prop('type','text'),t.attr('readonly','true'),t.on('click',o)),void p())};var y=l.destroy;l.destroy=function(){u&&g.useNative&&t.off('click',o),y()};var w=l.show;l.show=function(){!c&&t.attr('readonly')||t.attr('disabled')||(w(),d(function(){l.$isShown&&(l.$element.on(c?'touchstart':'mousedown',l.$onMouseDown),g.keyboard&&t.on('keydown',l.$onKeyDown))},0,!1))};var b=l.hide;return l.hide=function(e){l.$isShown&&(l.$element.off(c?'touchstart':'mousedown',l.$onMouseDown),g.keyboard&&t.off('keydown',l.$onKeyDown),b(e))},l}var u=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),c='createTouch'in t.document&&u;return e.lang||(e.lang=o.getDefaultLocale()),l.defaults=e,l}]}).directive('bsDatetimepicker',['$window','$parse','$q','$dateFormatter','$dateParser','$datetimepicker',function(e,t,a,n,i,o){var r=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:'EAC',require:'ngModel',link:function(e,t,a,s){function d(e){return e&&e.length?e:null}function l(e){if(angular.isDate(e)){var t=isNaN(g.$options.minDate)||e.getTime()>=g.$options.minDate,a=isNaN(g.$options.maxDate)||e.getTime()<=g.$options.maxDate,n=t&&a;s.$setValidity('date',n),s.$setValidity('min',t),s.$setValidity('max',a),n&&(s.$dateValue=e)}}function u(){return!s.$dateValue||isNaN(s.$dateValue.getTime())?'':$(s.$dateValue,c.dateFormat)}var c={scope:e};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','html','animation','autoclose','dateType','dateFormat','timezone','modelDateFormat','dayFormat','strictFormat','startWeek','startDate','useNative','lang','startView','minView','iconLeft','iconRight','daysOfWeekDisabled','id','prefixClass','prefixEvent','hasToday','hasClear'],function(e){angular.isDefined(a[e])&&(c[e]=a[e])});var m=/^(false|0|)$/i;angular.forEach(['html','container','autoclose','useNative','hasToday','hasClear'],function(e){angular.isDefined(a[e])&&m.test(a[e])&&(c[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(t){var n='bs'+t.charAt(0).toUpperCase()+t.slice(1);angular.isDefined(a[n])&&(c[t]=e.$eval(a[n]))});var g=o(t,s,c);c=g.$options,r&&c.useNative&&(c.dateFormat='yyyy-MM-dd');var h=c.lang,$=function(e,t){return n.formatDate(e,t,h)},f=i({format:c.dateFormat,lang:h,strict:c.strictFormat});a.bsShow&&e.$watch(a.bsShow,function(e,t){g&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(datepicker),?/i)),e===!0?g.show():g.hide())}),angular.forEach(['minDate','maxDate'],function(e){angular.isDefined(a[e])&&a.$observe(e,function(t){g.$options[e]=f.getDateForAttribute(e,t),isNaN(g.$options[e])||g.$build(!1),l(s.$dateValue)})}),angular.isDefined(a.dateFormat)&&a.$observe('dateFormat',function(e){g.$options.dateFormat=e}),e.$watch(a.ngModel,function(e,t){g.update(s.$dateValue)},!0),angular.isDefined(a.disabledDates)&&e.$watch(a.disabledDates,function(e,t){e=d(e),t=d(t),e&&g.updateDisabledDates(e)}),s.$parsers.unshift(function(e){var t;if(!e)return s.$setValidity('date',!0),null;var a=f.parse(e,s.$dateValue);return!a||isNaN(a.getTime())?void s.$setValidity('date',!1):(l(a),'string'===c.dateType?(t=f.timezoneOffsetAdjust(a,c.timezone,!0),$(t,c.modelDateFormat||c.dateFormat)):(t=f.timezoneOffsetAdjust(s.$dateValue,c.timezone,!0),'number'===c.dateType?t.getTime():'unix'===c.dateType?t.getTime()/1e3:'iso'===c.dateType?t.toISOString():new Date(t)))}),s.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:'string'===c.dateType?f.parse(e,null,c.modelDateFormat):'unix'===c.dateType?new Date(1e3*e):new Date(e),s.$dateValue=f.timezoneOffsetAdjust(t,c.timezone),u()}),s.$render=function(){t.val(u())},e.$on('$destroy',function(){g&&g.destroy(),c=null,g=null})}}}]);
//# sourceMappingURL=datetimepicker.min.js.map
