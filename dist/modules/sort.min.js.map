{"version":3,"sources":["modules/sort.js"],"names":["angular","item","scope","compile","element","attrs","list","querySelectorAll","i","len","length","postLink","options","show","dataName","key","charAt","toUpperCase","totalItems","target","event","currentTarget","$apply","isDefined","orderBy","sortBy","onSort","isFunction","$observe","newValue","bsKey","$eval","clickColumn","attr"],"mappings":"AAOA,YAEAA,SAAQC,OAAOD,0BAAgBC,UAAAA,UAAAA,WAC7B,OACEC,OAAM,EACNC,QAAMF,SAAYG,EAAAC,GAEhB,IAAK,GADDC,GAAOF,EAAQ,GAAGG,iBAAiB,MAC9BC,EAAI,EAAGC,EAAMH,EAAKI,OAAYD,EAAJD,EAASA,IAAK,CAEjD,GAAAP,GAAOK,EAASK,EACd,IAAAV,EAAIW,QAAAA,QAAAA,GACFV,EAAOA,KAAAA,iBAAAA,CACPE,GAAAA,GAASA,EAAAA,KAAAA,YACTS,GAAAA,OAAM,uFAAAC,EAAA,oGAAAA,EAAA,0CAEV,MACI,UAAmBC,EAAIC,EAAUC,GA6BnC,QAGIf,GAAeA,GAFjB,GAGO,KAHHU,EAGGM,WAHP,CAGA,GAAIC,GAASnB,QAAQI,QAAQgB,EAAMC,eAInCnB,EAAMoB,EAAAA,KAAAA,YAEFtB,KAAQuB,EAAUX,QACpBA,EAAAA,OAA8BV,QAAfA,EAAMsB,OAAeC,OAAAA,OAFpCvB,EAAMsB,QAAUV,EAChBZ,EAAMuB,OAAS,QAEjBvB,EAAMoB,SACFtB,QAAQuB,UAAUX,EAAQc,SAAW1B,QAAQ2B,WAAWf,EAAQc,SAClEd,EAAQc,OAAOxB,EAAMsB,QAAStB,EAAMuB,SA3CxC,GACEb,IAAAV,MACEU,EAAFR,QAASA,EACTS,MAAM,EAERb,SACQ4B,SAAS,UAAA,SAAcb,GAA7B,GACEH,GAAQM,KAAAA,EAAaW,OAAAA,GAAAA,cAAAA,EAAAA,MAAAA,EAAnB7B,SAAQuB,UAAUlB,EAAMyB,MAC1BlB,EAAQG,GAAOb,EAAM6B,MAAM1B,EAAMyB,OAKjC5B,QAAMa,UAAOb,EAAM6B,aADrB1B,EAAMuB,SAAS,aAAc,SAASC,GACpCjB,EAAQM,WAAaW,IAGzB7B,QAEMC,SAAYO,UAAAA,UAAAA,SAAAA,GAChBP,QAAOD,UAAQI,EAAQH,MACvBC,EAAID,GAAUC,EAAA6B,MAAA1B,EAAkBU,MAKlC,KAAA,GAJIT,GAAOF,EAAQ,GAAGG,iBAAiB,MAI9ByB,EAAAA,EAAAA,EAAaZ,EAAAA,OAAAA,EAAAA,EAAAA,IAAAA,CACpB,GAAIR,GAAAA,EAAQM,EAFZjB,GAGED,QAAAI,QAAAH,GAFEA,EAAKgC,KAAK,kBAIdhC,EAAIkB,GAAAA,QAASnB","file":"modules/sort.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.sort', []).directive('bsSort', [function() {\n  return {\n    scope: true,\n    compile: function (element, attrs) {\n      var list = element[0].querySelectorAll('th');\n      for (var i = 0, len = list.length; i < len; i++) {\n        var item = list[i];\n        item = angular.element(item);\n        if (item.attr('data-sortable')) {\n          var dataName = item.attr('data-name');\n          item.append('<div class=\"sorter\"><i class=\"nox-sort-up sort-asc\" ng-class=\"{active: orderBy == \\'' + dataName + '\\' && sortBy == \\'asc\\'}\"></i><i class=\"nox-sort-down sort-desc\" ng-class=\"{active: orderBy == \\'' + dataName + '\\' && sortBy == \\'desc\\'}\"></i></div>');\n        }\n      }\n\n      return function postLink (scope, element, attrs) {\n        var options = {\n          scope: scope,\n          element: element,\n          show: false\n        };\n        angular.forEach(['onSort'], function(key) {\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\n          if (angular.isDefined(attrs[bsKey])) {\n            options[key] = scope.$eval(attrs[bsKey]);\n          }\n        });\n        if (angular.isDefined(attrs.totalItems)) {\n          attrs.$observe('totalItems', function (newValue) {\n            options.totalItems = newValue;\n          });\n        }\n        // 初始化排序\n        angular.forEach([ 'orderBy', 'sortBy' ], function(key) {\n          if (angular.isDefined(attrs[key])) {\n            scope[key] = scope.$eval(attrs[key]);\n          }\n        });\n        var list = element[0].querySelectorAll('th');\n        for (var i = 0, len = list.length; i < len; i++) {\n          var item = list[i];\n          item = angular.element(item);\n          if (item.attr('data-sortable')) {\n            item.on('click', clickColumn);\n          }\n        }\n\n        function clickColumn (event) {\n          if (options.totalItems === -1) {\n            return;\n          }\n          var target = angular.element(event.currentTarget);\n          var dataName = target.attr('data-name');\n          if (dataName === scope.orderBy) {\n            scope.sortBy = scope.sortBy === 'asc' ? 'desc' : 'asc';\n          } else {\n            scope.orderBy = dataName;\n            scope.sortBy = 'desc';\n          }\n          scope.$apply();\n\n          if (angular.isDefined(options.onSort) && angular.isFunction(options.onSort)) {\n            options.onSort(scope.orderBy, scope.sortBy);\n          }\n        }\n      };\n    }\n  };\n}]);\n"],"sourceRoot":"/source/"}