{"version":3,"sources":["modules/sort.js"],"names":["angular","item","scope","compile","dataName","attr","append","querySelectorAll","i","len","list","length","postLink","options","element","show","key","charAt","toUpperCase","totalItems","target","event","currentTarget","$apply","isDefined","orderBy","sortBy","onSort","isFunction","$observe","newValue","attrs","bsKey","$eval","sortable","clickColumn","on"],"mappings":"AAOA,YAEAA,SAAQC,OAAOD,0BAAgBC,UAAAA,UAAAA,WAC7B,OACEC,OAAI,EACJC,QAAM,SAAIC,EAAgBC,GAExB,IAAK,GADDJ,GAAKK,EAAO,GAAAC,iBAAA,MACPC,EAAI,EAAGC,EAAMC,EAAKC,OAAYF,EAAJD,EAASA,IAAK,CAC/C,GAAIP,GAAOS,EAAKF,EAElBP,GAAOD,QAASY,QAAUV,EACxB,IAAIW,GAAAA,EAAAA,KAAAA,gBAAJ,IACEX,GAAOA,UAAAA,EAAAA,CACPY,GAAAA,GAASA,EAAAA,KAAAA,YACTC,GAAAA,OAAM,uFAAAX,EAAA,oGAAAA,EAAA,0CAEV,MACI,UAAmBY,EAAIC,EAAUC,GA4BnC,QAGIhB,GAAeA,GAFjB,GAGO,KAHHW,EAGGM,WAHP,CAGA,GAAIC,GAASpB,QAAQc,QAAQO,EAAMC,eAInCpB,EAAMqB,EAAAA,KAAAA,YAEFvB,KAAQwB,EAAUX,QACpBA,EAAAA,OAA8BX,QAAfA,EAAMuB,OAAeC,OAAAA,OAFpCxB,EAAMuB,QAAUrB,EAChBF,EAAMwB,OAAS,QAEjBxB,EAAMqB,SACFvB,QAAQwB,UAAUX,EAAQc,SAAW3B,QAAQ4B,WAAWf,EAAQc,SAClEd,EAAQc,OAAOzB,EAAMuB,QAASvB,EAAMwB,SA1CxC,GACEb,IAAAX,MACEW,EAAFC,QAASA,EACTC,MAAM,EAERf,SACQ6B,SAAS,UAAA,SAAcb,GAA7B,GACEH,GAAQM,KAAAA,EAAaW,OAAAA,GAAAA,cAAAA,EAAAA,MAAAA,EAAnB9B,SAAQwB,UAAUO,EAAMC,MAC1BnB,EAAQG,GAAOd,EAAM+B,MAAMF,EAAMC,OAKjC9B,QAAMc,UAAOd,EAAM+B,aADrBF,EAAMF,SAAS,aAAc,SAASC,GACpCjB,EAAQM,WAAaW,IAGzB9B,QAGMkC,SAAWd,UAAY,UAAA,SAAAJ,GACvBkB,QAAAA,UAAYA,EAAAA,MACdC,EAAAA,GAAYd,EAAAA,MAAAA,EAAAA,OAGhBP,EAAAsB,GAASD,QAAAA,KAAad,SAAAA,GACpB,GAAIR,GAAQM,QAAAA,QAAgBE,EAAGC,eAC7BY,EAAAd,EAAAf,KAAA,gBAFE6B,IAAyB,UAAbA,GAIhBC,EAAanC","file":"modules/sort.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.sort', []).directive('bsSort', [function() {\n  return {\n    scope: true,\n    compile: function (element, attrs) {\n      var list = element[0].querySelectorAll('th');\n      for (var i = 0, len = list.length; i < len; i++) {\n        var item = list[i];\n        item = angular.element(item);\n        var sortable = item.attr('data-sortable');\n        if (sortable && sortable !== 'false') {\n          var dataName = item.attr('data-name');\n          item.append('<div class=\"sorter\"><i class=\"nox-sort-up sort-asc\" ng-class=\"{active: orderBy == \\'' + dataName + '\\' && sortBy == \\'asc\\'}\"></i><i class=\"nox-sort-down sort-desc\" ng-class=\"{active: orderBy == \\'' + dataName + '\\' && sortBy == \\'desc\\'}\"></i></div>');\n        }\n      }\n\n      return function postLink (scope, element, attrs) {\n        var options = {\n          scope: scope,\n          element: element,\n          show: false\n        };\n        angular.forEach(['onSort'], function(key) {\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\n          if (angular.isDefined(attrs[bsKey])) {\n            options[key] = scope.$eval(attrs[bsKey]);\n          }\n        });\n        if (angular.isDefined(attrs.totalItems)) {\n          attrs.$observe('totalItems', function (newValue) {\n            options.totalItems = newValue;\n          });\n        }\n        // 初始化排序\n        angular.forEach([ 'orderBy', 'sortBy' ], function(key) {\n          if (angular.isDefined(attrs[key])) {\n            scope[key] = scope.$eval(attrs[key]);\n          }\n        });\n\n        element.on('click', 'th', function (event) {\n          var target = angular.element(event.currentTarget);\n          var sortable = target.attr('data-sortable');\n          if (sortable && sortable !== 'false') {\n            clickColumn(event);\n          }\n        });\n        function clickColumn (event) {\n          if (options.totalItems === -1) {\n            return;\n          }\n          var target = angular.element(event.currentTarget);\n          var dataName = target.attr('data-name');\n          if (dataName === scope.orderBy) {\n            scope.sortBy = scope.sortBy === 'asc' ? 'desc' : 'asc';\n          } else {\n            scope.orderBy = dataName;\n            scope.sortBy = 'desc';\n          }\n          scope.$apply();\n\n          if (angular.isDefined(options.onSort) && angular.isFunction(options.onSort)) {\n            options.onSort(scope.orderBy, scope.sortBy);\n          }\n        }\n      };\n    }\n  };\n}]);\n"],"sourceRoot":"/source/"}